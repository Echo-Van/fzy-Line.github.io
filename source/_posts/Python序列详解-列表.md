---
title: Python序列详解-列表
date: 2016-12-01 21:45:45
tags: [Python,列表]
categories: Python
---

#### 基本介绍

- 列表是最常用的Python数据类型。

- 列表是可变的。

- 列表的数据项不需要具有相同的类型。

- 列表用[]符号或list()创建。

<!--more-->

#### 基本的列表操作

##### list函数

将序列转换成列表。

```
>>> list('Hunau')
['H', 'u', 'n', 'a', 'u']
```
list函数适用于所有类型的序列，而不只是字符串。

##### 赋值

使用列表的索引标记来为某个特定的、位置明确的元素赋值。

```
>>> lst = [1,2,3]
>>> lst[2] = 4
>>> lst
[1, 2, 4]
```

**不能为一个位置不存在的元素进行赋值。**

##### 分片赋值

（1）通过分片赋值进行替换

可以一次为多个元素赋值，并且使用与原序列不等长的序列将分片替换：

```
>>> lst = [1, 2, 3, 4]
>>> lst[1:3] = list('xx')  #等长替换
>>> lst
[1, 'x', 'x', 4]
>>> lst[1:] = list('python')  #不等长替换
>>> lst
[1, 'p', 'y', 't', 'h', 'o', 'n']
```

（2）通过分片赋值进行插入

可以在不替换任何原有元素的情况下插入新的元素：

```
>>> lst = [1,6]
>>> lst[1:1] = [2, 3, 4, 5]
>>> lst
[1, 2, 3, 4, 5, 6]
```

（3）通过分片赋值进行删除

```
>>> lst = [1, 2, 3, 4, 5, 6]
>>> lst[1:5] = []
>>> lst
[1, 6]
```

##### 删除元素

有个方法可以从列表中按给定的索引而不是值来删除一个子项：del 语句。

语句del还可以从列表中删除切片或清空整个列表.

```
>>> lst = [1,2,3,4,5,6,7,8]
>>> del lst[1]  #删除一个元素
>>> lst
[1, 3, 4, 5, 6, 7, 8]
>>> del lst[0:2]  #借助分片删除多个元素
>>> lst
[4, 5, 6, 7, 8]
>>> del lst[:]  #删除列表的所有元素
>>> lst
[]
```

**del也可以用来删除整个变量！**

#### 列表对象方法

##### append

把一个元素添加到列表的结尾，相当于 a[len(a):] = [x]。它是直接修改列表，而不是返回一个新的列表。

```
>>> lst = [1,2,'x','y']
>>> lst.append(3)
>>> lst
[1, 2, 'x', 'y', 3]
```

##### extend

将一个给定列表中的所有元素都添加到另一个列表中，相当于 a[len(a):] = L 。


```
>>> a = [1,2,3]
>>> b = [4,5,6]
>>> a.extend(b)
>>> a
[1, 2, 3, 4, 5, 6]
```

对比连接操作：

```
>>> a = [1,2,3]
>>> b = [4,5,6]
>>> a + b
[1, 2, 3, 4, 5, 6]
```

看似两种方法得到的结果一样，实则不然。extend与连接操作最大的区别在于：extend方法修改了被扩展的序列（即上例中的a列表），而使用+号进行连接操作则会返回一个新的列表。

##### insert

在指定位置插入一个元素。第一个参数是准备插入到其前面的那个元素的索引，例如 lst.insert(0, x) 会插入到整个列表之前，而 lst.insert(len(lst), x) 相当于lst.append(x)。

```
>>> lst = [2,4]
>>> lst.insert(0,1)
>>> lst
[1, 2, 4]
>>> lst.insert(3,5)
>>> lst
[1, 2, 4, 5]
```

##### count

统计某个元素在列表中出现的次数。

```
>>> lst = [1,2,1,'x','x',['z','y'],['z','y']]
>>> lst.count(1)
2
>>> lst.count('x')
2
>>> lst.count(['z','y'])
2
```


##### remove

删除列表中值为 x 的第一个元素。如果没有这样的元素，就会返回一个错误。


```
>>> lst = [1, 2, 'z', 'y', 'z']
>>> lst.remove('z')
>>> lst
[1, 2, 'y', 'z']
```

##### index

返回列表中第一个值为x的元素的索引。如果没有匹配的元素就会返回一个错误。


```
>>> lst = [1, 2, 'z', 'y', 'z']
>>> lst.index('z')
2
```

##### pop

从列表的指定位置删除元素，并将其返回。如果没有指定索引，pop() 返回最后一个元素。元素随即从列表中被删除。

```
>>> lst = [1,2,3]
>>> lst.pop()
3
>>> lst
[1, 2]
```

**把列表当作堆栈使用**

用 append() 方法可以把一个元素添加到堆栈顶。用不指定索引的 pop() 方法可以把一个元素从堆栈顶释放出来。

```
>>> stack = [1,2]
>>> stack.append(3)
>>> stack.append(4)
>>> stack.pop()
4
>>> stack.pop()
3
>>> stack
[1, 2]
```

##### reverse

就地倒排列表中的元素。该方法直接修改列表，而不返回值。

```
>>> lst = [1,2,3,4]
>>> lst.reverse()
>>> lst
[4, 3, 2, 1]
```


##### sort

在原位置对列表中的元素就地进行排序。

```
>>> lst = [2,1,5,3,4]
>>> lst.sort()
>>> lst
[1, 2, 3, 4, 5]
```

在原位置排序意味着改变原来的列表，而不是返回一个已排序的列表副本。以下操作是错误的：

```
>>> lst = [2, 1, 5, 4, 3]
>>> x = lst.sort() #这样做是错误的
>>> print x
None
```

因为sort方法修改了lst列表，然后返回了空值，所以x的值为None。

可以用sorted()方法来获得已排序的列表副本

```
>>> lst = [2, 1, 5, 4, 3]
>>> x = sorted(lst)
>>> lst
[2, 1, 5, 4, 3]
>>> x
[1, 2, 3, 4, 5]
```
sorted()方法可以用在任何数据类型的序列中，返回的总是一个列表形式：

```
>>> sorted('python')
['h', 'n', 'o', 'p', 't', 'y']
```

#### 高级排序

sort函数是list类的一个方法，其中，包含三个参数cmp，key，reverse：cmp用于指定排序的大小比较算法；key用于制定排序的维度和优先级别；reverse说明是否是逆序排列（True表示从大到小）.

##### 参数reverse

```
>>> lst = [1, 5, 3, 2, 4]
>>> sorted(lst) #默认升序
[1, 2, 3, 4, 5]
>>> sorted(lst, reverse = True) #降序排列
[5, 4, 3, 2, 1]
>>> lst.sort()
>>> lst
[1, 2, 3, 4, 5]
>>> lst.sort(reverse = True)
>>> lst
[5, 4, 3, 2, 1]
```

##### 参数key

**按字符串长度排序**

```
>>> lst = ['c', 'java', 'python','c++']
>>> sorted(lst, key = len)  
['c', 'c++', 'java', 'python']
>>> lst.sort(key = len)
>>> lst
['c', 'c++', 'java', 'python']
```

**将列表中的每个元素变为小写，再按每个元素中的每个字母的ascii码从小到大排序 **

```
>>> lst = ['zZ','bb','XX','Aa']
>>> sorted(lst, key = str.lower)
['Aa', 'bb', 'XX', 'zZ']
>>> lst.sort(key = str.lower)
>>> lst
['Aa', 'bb', 'XX', 'zZ']
```

**按自定义函数排序**

```
>>> def lastChar(s): 
        return s[-1]    
>>> lst = ['abc','b','AAz','ef'] 
>>> sorted(lst, key = lastChar) ##按列表e中每个元素的最后一个字母的ascii码从小到大排序
['b', 'abc', 'ef', 'AAz']
```

**按字典属性排序**

```
>>> lst = [{'name':'fzy','age':20},{'name':'xxx','age':30},{'name':'yyy','age':25}] #列表中的元素为字典 
>>> def age(s): 
        return s['age'] 
>>> sorted(lst,key = age) #自定义函数按列表f中字典的age从小到大排序 
[{'age': 20, 'name': 'fzy'}, {'age': 25, 'name': 'yyy'}, {'age': 30, 'name': 'xxx'}] 
```